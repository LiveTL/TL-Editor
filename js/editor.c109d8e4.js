(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editor"],{1681:function(t,e,a){},1892:function(t,e,a){"use strict";a("6809")},"43cf":function(t,e,a){(function(e){var a={src:"https://www.youtube.com/iframe_api",loading:!1,loaded:!1,listeners:[],load:function(t){var a=this;if(this.listeners.push(t),this.loaded)setTimeout((function(){a.done()}));else if(!this.loading){this.loading=!0,e.onYouTubeIframeAPIReady=function(){a.loaded=!0,a.done()};var n=document.createElement("script");n.type="text/javascript",n.src=this.src,document.body.appendChild(n)}},done:function(){delete e.onYouTubeIframeAPIReady;while(this.listeners.length)this.listeners.pop()(e.YT)}};t.exports?t.exports=a:e.YouTubeIframeLoader=a})(window)},"49d7":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0 d-flex fill-parent-height",attrs:{fluid:""}},[a("v-row",{staticClass:"pa-0",staticStyle:{"min-height":"0","max-width":"100%"}},[a("v-col",{staticClass:"fill-parent-height",staticStyle:{"overflow-y":"scroll"},attrs:{md:"6",cols:"12"}},[a("v-container",[t.loadingCaptions?a("v-row",[a("v-col",{attrs:{align:"center"}},[a("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):a("v-row",[0===t.sortedCaptions.length?a("v-col",{staticClass:"pr-0",attrs:{cols:"12"}},[a("v-card",[a("v-card-title",[t._v("No caption entries to display")])],1)],1):t._e(),t._l(t.sortedCaptions,(function(t){return a("Translation",{key:t.id,attrs:{caption:t,id:"caption-"+t.index}})})),a("v-col",{staticClass:"pr-0",attrs:{cols:"12"}},[a("v-btn",{attrs:{id:"new-caption-btn",width:"100%"},on:{click:function(e){return t.addCaption()}}},[a("v-icon",[t._v("mdi-plus")]),t._v(" New Caption ")],1)],1)],2)],1)],1),a("v-col",{staticClass:"px-0 fill-parent-height",attrs:{md:"6",cols:"12"}},[a("Video")],1)],1),t.repositioning?a("div",{staticClass:"overlay"}):t._e(),t._l(t.sortedCaptions,(function(e){return a("div",{key:e.id},[a("div",{staticClass:"caption-marker",style:{left:t.calcLeft(e)},on:{click:function(a){return t.scrollIntoView(e)},mousedown:function(a){return t.dragStarted(a,e)}}})])}))],2)},i=[],r=a("1da1"),o=a("5530"),s=(a("96cf"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wrapper"}},[a("div",{attrs:{id:"player"}})])}],l=a("2f62"),d=a("43cf"),u=a.n(d),p={name:"Video",computed:Object(l["b"])(["player","videoID"]),watch:{videoID:function(){this.player&&this.player.loadVideoById(this.videoID)}},mounted:function(){var t=this;u.a.load((function(e){t.$store.commit("setPlayer",new e.Player("player",{height:"100%",width:"100%",videoId:t.videoID,autoplay:1,playerVars:{autoplay:1}}))}))},methods:{},props:{}},m=p,h=(a("1892"),a("2877")),v=Object(h["a"])(m,s,c,!1,null,"9c6e45c8",null),f=v.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",{staticClass:"py-2 pr-0",attrs:{cols:"12"}},[a("v-card",{staticClass:"grey darken-4",attrs:{flat:""}},[a("v-card-text",{staticClass:"pa-3"},[a("v-textarea",{staticClass:"pt-0",attrs:{label:"Caption Text",rows:"1","auto-grow":"",filled:"",dense:"","hide-details":""},model:{value:t.localCaption.translatedText,callback:function(e){t.$set(t.localCaption,"translatedText",e)},expression:"localCaption.translatedText"}}),a("v-container",{staticClass:"pb-0 px-0 pt-5"},[a("v-row",[a("v-col",{staticClass:"pt-1",attrs:{lg:"6",cols:"12"}},[a("div",{staticClass:"px-3",staticStyle:{"background-color":"#1f1f1f","border-radius":"6px"}},[a("h4",{staticClass:"text-center pb-1"},[t._v("Start Time")]),a("translation-timestamp-input",{attrs:{timestamp:t.localCaption.start,kind:"start"},on:{timestampChanged:t.timestampChanged}})],1)]),a("v-col",{staticClass:"pt-1",attrs:{lg:"6",cols:"12"}},[a("div",{staticClass:"px-3",staticStyle:{"background-color":"#1f1f1f","border-radius":"6px"}},[a("h4",{staticClass:"text-center pb-1"},[t._v("End Time")]),a("translation-timestamp-input",{attrs:{timestamp:t.localCaption.end,kind:"end"},on:{timestampChanged:t.timestampChanged}})],1)])],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{plain:"",small:"",color:"red",loading:t.deleting,disabled:t.deleting},on:{click:t.deleteTranslation}},[a("v-icon",[t._v("mdi-delete")]),a("span",{staticClass:"hidden-md-and-down"},[t._v("Delete Translation")])],1),a("v-btn",{attrs:{plain:"",small:"",color:"red",disabled:!1===t.hasChanges()},on:{click:t.undoLocalChanges}},[a("v-icon",[t._v("mdi-undo-variant")]),a("span",{staticClass:"hidden-md-and-down"},[t._v("Undo Modifications")])],1),a("v-spacer"),a("v-btn",{attrs:{plain:"",small:"",color:"green",loading:t.saving,disabled:!this.localCaption.id||!1===t.hasChanges()||t.saving},on:{click:t.saveLocalChanges}},[a("v-icon",[t._v("mdi-content-save")]),a("span",{staticClass:"hidden-md-and-down"},[t._v("Save Modifications")])],1),a("v-btn",{attrs:{plain:"",small:"",color:"blue",loading:t.creating,disabled:!1===t.canCreateTranslation()||t.creating},on:{click:t.createTranslation}},[a("v-icon",[t._v("mdi-upload")]),a("span",{staticClass:"hidden-md-and-down"},[t._v("Create Translation")])],1)],1)],1)],1)},C=[],b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"caption-timestamp",attrs:{filled:"",outlined:"",dense:"","hide-details":"",label:"Hours"},on:{change:function(e){return t.$emit("timestampChanged",t.timestampArr,t.kind)}},model:{value:t.timestampArr[0],callback:function(e){t.$set(t.timestampArr,0,e)},expression:"timestampArr[0]"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"caption-timestamp",attrs:{filled:"",outlined:"",dense:"","hide-details":"",label:"Minutes"},on:{change:function(e){return t.$emit("timestampChanged",t.timestampArr,t.kind)}},model:{value:t.timestampArr[1],callback:function(e){t.$set(t.timestampArr,1,e)},expression:"timestampArr[1]"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"caption-timestamp",attrs:{filled:"",outlined:"",dense:"","hide-details":"",label:"Seconds"},on:{change:function(e){return t.$emit("timestampChanged",t.timestampArr,t.kind)}},model:{value:t.timestampArr[2],callback:function(e){t.$set(t.timestampArr,2,e)},expression:"timestampArr[2]"}})],1)],1)},w=[],x=(a("a9e3"),a("9944")),y={name:"CaptionTimestampInput",props:{timestamp:{type:Number,required:!0},kind:{type:String,required:!0}},data:function(){return{timestampArr:Object(x["convertToClockTime"])(this.timestamp)}}},T=y,k=a("6544"),I=a.n(k),_=a("62ad"),O=a("0fd9"),j=a("8654"),V=Object(h["a"])(T,b,w,!1,null,"338cb22e",null),$=V.exports;I()(V,{VCol:_["a"],VRow:O["a"],VTextField:j["a"]});var D=a("a9f9"),R={name:"Caption",components:{TranslationTimestampInput:$},computed:Object(o["a"])({},Object(l["b"])(["videoID"])),props:{caption:{type:Object,required:!0}},data:function(){return{localCaption:Object(o["a"])({},this.caption),deleting:!1,saving:!1,creating:!1}},methods:{timestampChanged:function(t,e){var a=36e5,n=6e4,i=1e3;"start"===e?this.localCaption.start=t[0]*a+t[1]*n+t[2]*i:"end"===e&&(this.localCaption.end=t[0]*a+t[1]*n+t[2]*i)},createTranslation:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.creating=!0,a={videoId:t.videoID,languageCode:"en",translatedText:t.localCaption.translatedText,start:t.localCaption.start,end:t.localCaption.end},e.t0=D["a"],e.t1=a,e.next=6,t.$auth.getTokenSilently();case 6:return e.t2=e.sent,e.next=9,(0,e.t0)(e.t1,e.t2);case 9:if(n=e.sent,"number"===typeof n){e.next=14;break}return console.debug('Got error message "'.concat(n,'" when creating translation with API')),t.creating=!1,e.abrupt("return");case 14:t.localCaption.id=n,t.$store.commit("modifyCaption",t.localCaption),t.creating=!1;case 17:case"end":return e.stop()}}),e)})))()},saveLocalChanges:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.saving=!0,a={translatedText:t.localCaption.translatedText,start:t.localCaption.start,end:t.localCaption.end},e.t0=D["e"],e.t1=t.localCaption.id,e.t2=a,e.next=7,t.$auth.getTokenSilently();case 7:return e.t3=e.sent,e.next=10,(0,e.t0)(e.t1,e.t2,e.t3);case 10:if(n=e.sent,"boolean"===typeof n){e.next=15;break}return console.debug('Got error message "'.concat(n,'" when creating translation with API')),t.saving=!1,e.abrupt("return");case 15:t.$store.commit("modifyCaption",t.localCaption),t.saving=!1;case 17:case"end":return e.stop()}}),e)})))()},deleteTranslation:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.deleting=!0,e.t0=D["b"],e.t1=t.caption.id,e.next=5,t.$auth.getTokenSilently();case 5:return e.t2=e.sent,e.next=8,(0,e.t0)(e.t1,"TODO",e.t2);case 8:t.$store.commit("deleteCaption",t.caption),t.deleting=!1;case 10:case"end":return e.stop()}}),e)})))()},undoLocalChanges:function(){this.localCaption=Object(o["a"])({},this.caption)},isTranslationValid:function(){return void 0!==this.localCaption.translatedText&&null!==this.localCaption.translatedText&&""!==this.localCaption.translatedText},canCreateTranslation:function(){return this.isTranslationValid()&&void 0===this.localCaption.id},hasChanges:function(){return this.localCaption.translatedText!==this.caption.translatedText||this.localCaption.start!==this.caption.start||this.localCaption.end!==this.caption.end}}},A=R,S=a("8336"),L=(a("0481"),a("615b"),a("10d2")),E=a("297c"),P=a("1c87"),H=a("58df"),B=Object(H["a"])(E["a"],P["a"],L["a"]).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes:function(){return Object(o["a"])(Object(o["a"])({"v-card":!0},P["a"].options.computed.classes.call(this)),{},{"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised},L["a"].options.computed.classes.call(this))},styles:function(){var t=Object(o["a"])({},L["a"].options.computed.styles.call(this));return this.img&&(t.background='url("'.concat(this.img,'") center center / cover no-repeat')),t}},methods:{genProgress:function(){var t=E["a"].options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[t]):null}},render:function(t){var e=this.generateRouteLink(),a=e.tag,n=e.data;return n.style=this.styles,this.isClickable&&(n.attrs=n.attrs||{},n.attrs.tabindex=0),t(a,this.setBackgroundColor(this.color,n),[this.genProgress(),this.$slots.default])}}),N=a("80d2"),G=Object(N["e"])("v-card__actions"),M=(Object(N["e"])("v-card__subtitle"),Object(N["e"])("v-card__text")),z=Object(N["e"])("v-card__title"),W=a("a523"),F=a("132d"),Y=a("2fa4"),q=(a("1681"),Object(H["a"])(j["a"])),J=q.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(o["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},j["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"}},genInput:function(){var t=j["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){j["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),U=Object(h["a"])(A,g,C,!1,null,null,null),K=U.exports;I()(U,{VBtn:S["a"],VCard:B,VCardActions:G,VCardText:M,VCol:_["a"],VContainer:W["a"],VIcon:F["a"],VRow:O["a"],VSpacer:Y["a"],VTextarea:J});var X={name:"EditorUI",components:{Translation:K,Video:f},data:function(){return{repositioning:!1,loadingCaptions:!1,videoWidth:.5}},computed:Object(o["a"])(Object(o["a"])({},Object(l["b"])(["player","videoID","captions"])),{},{currentTime:{set:function(t){this.$store.commit("setCurrentTime",t)},get:function(){return this.$store.state.currentTime}},videoDuration:{set:function(t){this.$store.commit("setDuration",t)},get:function(){return this.$store.state.videoDuration}},sortedCaptions:{get:function(){return this.$store.getters.sortedCaptions}}}),watch:{repositioning:function(){document.body.style.setProperty("cursor",this.repositioning?"grabbing":"default","important")},videoID:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingCaptions=!0,e.next=3,t.initLiveTLAPI();case 3:t.loadingCaptions=!1;case 4:case"end":return e.stop()}}),e)})))()},player:function(){var t=this,e=this.player;if(e){var a=setInterval((function(){e.getDuration&&(t.videoDuration=1e3*e.getDuration(),clearInterval(a))}),100);window.addEventListener("message",(function(e){var a,n;try{n=JSON.parse(e.data)}catch(s){}if("infoDelivery"===(null===(a=n)||void 0===a?void 0:a.event)){if(!n.info.currentTime)return;n.info.currentTime*=1e3;for(var i=t.binarySearch(t.currentTime),r=t.binarySearch(n.info.currentTime),o=i;o<r;o++)t.splash(t.sortedCaptions[o]);t.currentTime=n.info.currentTime}}))}}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.commit("setVideoID",t.$route.params.videoID||t.videoID);case 1:case"end":return e.stop()}}),e)})))()},methods:Object(o["a"])(Object(o["a"])({},x["default"]),{},{initLiveTLAPI:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(D["d"])(t.videoID,"en",-1,[],[],!1);case 2:if(a=e.sent,Array.isArray(a)){for(n=0;n<a.length;n++)a[n].index=n,null===a[n].end&&(a[n].end=a[n].start);t.$store.commit("initializeCaptions",a)}case 4:case"end":return e.stop()}}),e)})))()},addCaption:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Math.floor(t.currentTime),n={start:a,end:a+5e3},t.$store.commit("addCaption",n),t.player.pauseVideo(),e.next=6,t.$nextTick();case 6:t.scrollIntoView(n);case 7:case"end":return e.stop()}}),e)})))()},dragStarted:function(t,e){var a=this;t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,this.repositioning=!0;var n=function(t){var n=a.videoDuration*(t.clientX-window.innerWidth*a.videoWidth)/(window.innerWidth*a.videoWidth-20),i=e.end-e.start;e.start=Math.floor(Math.max(Math.min(a.videoDuration,n),0)),e.end=e.start+i};window.addEventListener("mousemove",n);var i=window.addEventListener("mouseup",(function(){window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),a.repositioning=!1}))},scrollIntoView:function(t){},splash:function(t){var e=document.getElementById("caption-".concat(t.index));e.parentElement.classList.remove("splash"),e.offsetHeight,e.parentElement.classList.add("splash")},calcLeft:function(t){return"calc(".concat(t.start/this.videoDuration," * (50% - 20px) - var(--width) / 2 + 50%)")}})},Q=X,Z=(a("c212"),a("cd9b"),a("490a")),tt=Object(h["a"])(Q,n,i,!1,null,"4552879d",null);e["default"]=tt.exports;I()(tt,{VBtn:S["a"],VCard:B,VCardTitle:z,VCol:_["a"],VContainer:W["a"],VIcon:F["a"],VProgressCircular:Z["a"],VRow:O["a"]})},"615b":function(t,e,a){},6809:function(t,e,a){},c212:function(t,e,a){"use strict";a("d883")},cd9b:function(t,e,a){"use strict";a("d8fd")},d883:function(t,e,a){},d8fd:function(t,e,a){}}]);
//# sourceMappingURL=editor.c109d8e4.js.map