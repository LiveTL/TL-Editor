(function(t){function e(e){for(var i,s,o=e[0],l=e[1],u=e[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},r=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/TL-Editor/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"023e":function(t,e,n){},"0ffe":function(t,e,n){"use strict";n("4dcc")},"2f8c":function(t,e,n){"use strict";n("52ff")},"4dcc":function(t,e,n){},"52ff":function(t,e,n){},"561d":function(t,e,n){"use strict";n("023e")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],s=(n("561d"),n("2877")),o={},l=Object(s["a"])(o,a,r,!1,null,null,null),u=l.exports,c=n("f309");i["a"].use(c["a"]);var d=new c["a"]({}),p=n("8c4f"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{dark:""}},[n("v-app-bar",{attrs:{app:"",bottom:"",dense:"",color:"primary"}},[n("div",{staticClass:"wrapper"},[n("div",[n("v-text-field",{staticStyle:{width:"8em !important"},attrs:{label:"Video",filled:"",dark:"",outlined:""},model:{value:t.videoID,callback:function(e){t.videoID=e},expression:"videoID"}}),n("v-text-field",{attrs:{label:"Hour",filled:"",dark:"",rules:[t.validTimestamp],outlined:""},on:{change:function(e){return t.timeChanged()},focus:function(e){return t.player.pauseVideo()}},model:{value:t.timestamp[0],callback:function(e){t.$set(t.timestamp,0,e)},expression:"timestamp[0]"}}),n("v-text-field",{attrs:{label:"Minute",filled:"",dark:"",rules:[t.validTimestamp],outlined:""},on:{change:function(e){return t.timeChanged()},focus:function(e){return t.player.pauseVideo()}},model:{value:t.timestamp[1],callback:function(e){t.$set(t.timestamp,1,e)},expression:"timestamp[1]"}}),n("v-text-field",{attrs:{label:"Second",filled:"",dark:"",rules:[t.validTimestamp],outlined:""},on:{change:function(e){return t.timeChanged()},focus:function(e){return t.player.pauseVideo()}},model:{value:t.timestamp[2],callback:function(e){t.$set(t.timestamp,2,e)},expression:"timestamp[2]"}}),n("v-btn",{staticClass:"mx-2",attrs:{id:"play",fab:"",dark:"",small:"",color:"cyan"},on:{click:function(e){return t.togglePlay()}}},[t.player&&t.player.getPlayerState&&1==t.player.getPlayerState()?n("v-icon",{attrs:{dark:""}},[t._v(" mdi-pause ")]):n("v-icon",{attrs:{dark:""}},[t._v(" mdi-play ")])],1)],1)])]),n("v-main",[n("div",{staticClass:"horizontalsplit"},[n("div",{style:"height: 100%; width: calc(100% * (1 - "+t.videoWidth+")); flex-direction: column; display: flex;"},[n("v-btn",{staticStyle:{float:"left",position:"relative",margin:"20px"},on:{click:function(e){return t.addTL()}}},[n("v-icon",[t._v(" mdi-plus ")]),t._v(" New Caption ")],1),n("v-list",{attrs:{dark:""}},t._l(t.sortedTLs,(function(e){return n("v-list-item",{key:e?e.id:"",staticClass:"tlentry"},[n("v-list-item-content",[n("v-textarea",{attrs:{dark:"",filled:"",name:"input-7-4",label:"Caption text",value:e.translatedText},model:{value:e.translatedText,callback:function(n){t.$set(e,"translatedText",n)},expression:"tl.translatedText"}})],1),n("v-list-item-action",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end"}},[n("v-text-field",{staticClass:"tltimeindicator",attrs:{label:"Hour",filled:"",dark:"",rules:[t.validTimestamp],outlined:""},on:{change:function(n){return t.tlTimeChanged(e)}},model:{value:e.timestamp[0],callback:function(n){t.$set(e.timestamp,0,n)},expression:"tl.timestamp[0]"}}),n("v-text-field",{staticClass:"tltimeindicator",attrs:{label:"Minute",filled:"",dark:"",rules:[t.validTimestamp],outlined:""},on:{change:function(n){return t.tlTimeChanged(e)}},model:{value:e.timestamp[1],callback:function(n){t.$set(e.timestamp,1,n)},expression:"tl.timestamp[1]"}}),n("v-text-field",{staticClass:"tltimeindicator",attrs:{label:"Second",filled:"",dark:"",rules:[t.validTimestamp],outlined:""},on:{change:function(n){return t.tlTimeChanged(e)}},model:{value:e.timestamp[2],callback:function(n){t.$set(e.timestamp,2,n)},expression:"tl.timestamp[2]"}}),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-close")])],1)],1)],1)})),1)],1),n("div",{style:"height: 100%; width: calc(100% * "+t.videoWidth+")"},[n("Video",{attrs:{videoID:t.videoID},on:{ytPlayer:t.initPlayer}})],1)])]),t.repositioning?n("div",{staticStyle:{position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%","z-index":"1"}}):t._e(),t._l(t.tls,(function(e){return n("div",{key:e.id},[n("div",{staticClass:"tlmarker",style:{left:t.calcLeft(e)},on:{click:function(n){return t.editTL(e)},mouseover:function(n){t.statusMessage="Click to edit, drag to reposition (ID: "+e.id+")"},mouseleave:function(e){t.statusMessage=null},mousedown:function(n){return t.dragStarted(n,e)}}})])}))],2)},f=[],v=n("1da1"),h=n("2909"),g=(n("96cf"),n("d3b7"),n("d81d"),n("ac1f"),n("1276"),n("498a"),n("a434"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"wrapper"}},[n("div",{attrs:{id:"player"}})])}],x=n("43cf"),w=n.n(x),b={name:"Video",data:function(){return{player:null}},watch:{videoID:function(){this.player.loadVideoById(this.videoID)}},mounted:function(){var t=this;w.a.load((function(e){t.player=new e.Player("player",{height:"100%",width:"100%",videoId:t.videoID,autoplay:1,playerVars:{autoplay:1}}),t.$emit("ytPlayer",t.player)}))},methods:{},props:{videoID:{type:String,required:!0}}},T=b,k=(n("0ffe"),Object(s["a"])(T,g,y,!1,null,"315022e2",null)),I=k.exports,O={name:"MainUI",components:{Video:I},data:function(){return{player:null,timestamp:[0,0,0],videoID:"Z-a58aBXH58",tls:[],saving:!1,statusMessage:null,repositioning:!1,duration:1,videoWidth:.5}},computed:{sortedTLs:function(){return Object(h["a"])(this.tls).sort((function(t,e){return t.startTimeOffset-e.startTimeOffset}))}},watch:{repositioning:function(){document.body.style.setProperty("cursor",this.repositioning?"grabbing":"default","important")}},created:function(){this.videoID=this.$route.params.videoID||this.videoID},mounted:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.addEventListener("message",(function(e){try{var n=JSON.parse(e.data);"infoDelivery"===n.event&&(t.timestamp=t.setNewTime(n.info.currentTime))}catch(i){}})),e.prev=1,e.next=4,fetch("https://api.livetl.app/translations/".concat(t.videoID,"/en"));case 4:return e.next=6,e.sent.json();case 6:for(t.tls=e.sent,n=0;n<t.tls.length;n++)t.tls[n].index=n,t.tls[n].timestamp=t.setNewTime(t.tls[n].startTimeOffset);console.log(t.tls,t.videoID),e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})))()},methods:{validTimestamp:function(t){return t>=0&&t<=60},timeChanged:function(){this.timestamp=this.timestamp.map((function(t){return parseInt(t)})),this.player.seekTo(60*(60*this.timestamp[0]+this.timestamp[1])+this.timestamp[2])},tlTimeChanged:function(t){t.timestamp=t.timestamp.map((function(t){return parseInt(t)})),t.startTimeOffset=60*(60*t.timestamp[0]+t.timestamp[1])+t.timestamp[2]},togglePlay:function(){this.player&&this.player.getPlayerState&&1===this.player.getPlayerState()?this.player.pauseVideo():this.player.playVideo()},setNewTime:function(t){return new Date(1e3*parseFloat(t)).toISOString().substr(11,8).split(":").map((function(t){return parseInt(t)}))},editTL:function(t){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.timestamp=e.setNewTime(t.startTimeOffset),e.timeChanged(),e.player.pauseVideo(),t.editing=!0,n.next=6,e.$nextTick();case 6:e.statusMessage="Editing caption (ID: ".concat(t.id,")");case 7:case"end":return n.stop()}}),n)})))()},stopEditing:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n?(this.statusMessage="Saving caption (ID: ".concat(t.id,")"),t.translatedText=document.querySelector("#editableElement").innerText.trim(),this.saving=!0,setTimeout((function(){t.editing=!1,e.saving=!1,e.removeIfEmpty(t),e.statusMessage=null,e.$forceUpdate()}),1e3)):(t.editing=!1,this.statusMessage=null,this.removeIfEmpty(t),this.$forceUpdate())},removeIfEmpty:function(t){t.translatedText||this.tls.splice(t.index,1)},addTL:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.player.getCurrentTime(),t.tls.push({translatedText:"",startTimeOffset:n,index:t.tls.length,timestamp:t.setNewTime(n)}),t.editTL(t.tls[t.tls.length-1]);case 3:case"end":return e.stop()}}),e)})))()},dragStarted:function(t,e){var n=this;t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,this.repositioning=!0;var i=function(t){var i=n.duration*(t.clientX-10-window.innerWidth*n.videoWidth)/(window.innerWidth*n.videoWidth-20);e.startTimeOffset=Math.max(Math.min(n.duration,i),0),e.timestamp=n.setNewTime(e.startTimeOffset),n.player.seekTo(i)};window.addEventListener("mousemove",i);var a=window.addEventListener("mouseup",(function(){window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",a),n.repositioning=!1}))},calcLeft:function(t){return"calc(".concat(t.startTimeOffset/this.duration," * (50% - 20px) + 10px - var(--width) / 2 + 50%)")},initPlayer:function(t){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.player=t,i=setInterval((function(){t.getDuration&&(e.duration=t.getDuration(),clearInterval(i))}),10);case 2:case"end":return n.stop()}}),n)})))()}}},D=O,V=(n("2f8c"),n("6544")),S=n.n(V),_=n("7496"),C=n("40dc"),P=n("8336"),j=n("132d"),L=n("8860"),M=n("da13"),$=n("1800"),E=n("5d23"),N=n("f6c4"),R=n("8654"),W=n("a844"),B=Object(s["a"])(D,m,f,!1,null,null,null),A=B.exports;S()(B,{VApp:_["a"],VAppBar:C["a"],VBtn:P["a"],VIcon:j["a"],VList:L["a"],VListItem:M["a"],VListItemAction:$["a"],VListItemContent:E["a"],VMain:N["a"],VTextField:R["a"],VTextarea:W["a"]}),i["a"].use(p["a"]);var H=[{path:"/:videoID?/",name:"App",component:A}],J=new p["a"]({routes:H}),U=J;i["a"].config.productionTip=!1,new i["a"]({vuetify:d,router:U,render:function(t){return t(u)}}).$mount("#app")}});
//# sourceMappingURL=app.dad20965.js.map